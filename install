#!/bin/bash

if which node > /dev/null; then
	# Ok, pass..
	:
else
  if which nvm > /dev/null; then
    # node.js is not installed, but nvm yes
    nvm install 18
  else
    # node.js is not installed, neither nvm
    wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
    echo "Please close the console and launch again this script!"
  fi
fi

node_version=$(node --version)

if ! [[ "$node_version" == v18.* ]]; then
    echo "Warning! You are not using node.js version 18, this application is not guaranteed to work."
fi

npm install -g cross-env
npm install -g tsx

npm run build
npm link